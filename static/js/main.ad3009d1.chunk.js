(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(37)},24:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),l=a.n(r),c=a(1),s=a(4),i=a(5),u=a(7),h=a(6),m=a(8),d=a(10),f=a(12),p="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:b},E=function(){return fetch("".concat(p,"/books"),{headers:k}).then(function(e){return e.json()}).then(function(e){return e.books})},y=function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},v=function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(f.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},g=(a(24),function(){return o.a.createElement("div",{className:"side-content"},o.a.createElement("div",{className:"logo"},o.a.createElement("div",{className:"overlay"},o.a.createElement("h1",null,"MyReads"))),o.a.createElement("div",{className:"menu"},o.a.createElement("h3",null,"BROWSE"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(c.c,{to:"/",exact:!0,activeClassName:"current"},"All Books")),o.a.createElement("li",null,o.a.createElement(c.c,{to:"/reading",activeClassName:"current"},"Currently Reading")),o.a.createElement("li",null,o.a.createElement(c.c,{to:"/toread",activeClassName:"current"},"Want to Read")),o.a.createElement("li",null,o.a.createElement(c.c,{to:"/read",activeClassName:"current"},"Read")),o.a.createElement("li",null,o.a.createElement(c.c,{to:"/search",activeClassName:"current"},"Search")))))}),S=function(){return o.a.createElement("div",{className:"loader"},o.a.createElement("svg",{className:"spinner",viewBox:"0 0 50 50"},o.a.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})))},N=function(e){return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},e.book.imageLinks?o.a.createElement("div",{className:"book-cover",style:{backgroundImage:"url(".concat(e.book.imageLinks.thumbnail,")")}}):o.a.createElement("div",{className:"book-cover",style:{backgroundImage:"url(missingThumbnail.jpg)"}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{onChange:function(t){e.onUpdateShelf(e.book,t.target.value)},value:e.book.shelf},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))),o.a.createElement("div",{className:"book-title"},e.book.title),e.book.authors&&e.book.authors.map(function(e,t){return o.a.createElement("div",{key:t,className:"book-authors"},e)}))},j=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return"noResults"===this.props.title?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"warning"},"Your search did not match any books."),o.a.createElement("div",{className:"suggestions"},"Suggestions:",o.a.createElement("ul",null,o.a.createElement("li",null,"Make sure all words are spelled correctly."),o.a.createElement("li",null,"Try more general keywords."),o.a.createElement("li",null,"Try different keywords.")))):"search"===this.props.title?o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{className:"empty"},"You have ",this.props.ownedBooks.length," book",1===this.props.ownedBooks.length?"":"s"," in your bookshelf"),o.a.createElement("p",{className:"empty"},"Get more by searching above! or check your bookshelf ",o.a.createElement(c.b,{to:"/"},"here"))):o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,this.props.title),o.a.createElement("div",{className:"bookShelf"},o.a.createElement("p",{className:"empty"},"Your bookshelf is empty"),o.a.createElement("p",{className:"empty"},"Get started by searching for books ",o.a.createElement(c.b,{to:"/search"},"online!"))))}}]),t}(o.a.PureComponent),R=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).updateShelf=function(e,t){a.props.onUpdateShelf(e,t)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.books.length&&this.props.books.filter(function(t){return t.shelf===e.props.shelf}).length?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,this.props.title),o.a.createElement("div",{className:"bookShelf"},this.props.books.filter(function(t){return t.shelf===e.props.shelf}).map(function(t){return o.a.createElement(N,{book:t,key:t.id,onUpdateShelf:e.updateShelf})}))):o.a.createElement(j,{title:this.props.title})}}]),t}(o.a.PureComponent),w=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",searchedBooks:[],noResult:!1},a.updateShelf=function(e,t){a.props.onUpdateShelf(e,t),e.shelf=t},a.updateQuery=function(e){a.setState({query:e.target.value},a.debounce(function(){a.searchBooks(a.state.query.trim())},750))},a.searchBooks=function(e){a.state.query?v(e).then(function(e){if(e.length>0){var t=e.map(function(e){return a.props.ownedBooks.forEach(function(t){e.id===t.id&&(e.shelf=t.shelf),e.shelf||(e.shelf="none")}),e});a.setState({searchedBooks:t,noResult:!1})}else a.setState({searchedBooks:[],noResult:!0})}):a.setState({query:"",searchedBooks:[],noResult:!1})},a.debounce=function(e,t){var a=null;return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];a&&clearTimeout(a),a=setTimeout(function(){e.apply(void 0,o)},t)}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"searchHeader"},o.a.createElement("h2",null,"Search"),o.a.createElement("input",{type:"text",placeholder:"Search all books",value:this.state.query,onChange:function(t){return e.updateQuery(t)}})),o.a.createElement("div",{className:"bookShelf"},this.state.searchedBooks&&this.state.query&&this.state.searchedBooks.map(function(t){return o.a.createElement(N,{book:t,key:t.id,onUpdateShelf:e.updateShelf})}),this.state.noResult&&o.a.createElement(j,{title:"noResults"}),!this.state.query&&o.a.createElement(j,{title:"search",ownedBooks:this.props.ownedBooks})))}}]),t}(o.a.PureComponent),O=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={books:[]},a.showLoader=function(){document.querySelector(".loader").style.display="flex"},a.hideLoader=function(){document.querySelector(".loader").style.display="none"},a.fetchBooks=function(){E().then(function(e){a.setState({books:e}),a.hideLoader()})},a.updateShelf=function(e,t){a.showLoader(),y(e,t).then(function(){a.fetchBooks()})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchBooks()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"app"},o.a.createElement(g,null),o.a.createElement("div",{className:"main-content"},o.a.createElement(d.a,{exact:!0,path:"/",render:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(R,{title:"Currently Reading",shelf:"currentlyReading",books:e.state.books,onUpdateShelf:e.updateShelf}),o.a.createElement(R,{title:"Want to Read",shelf:"wantToRead",books:e.state.books,onUpdateShelf:e.updateShelf}),o.a.createElement(R,{title:"Read",shelf:"read",books:e.state.books,onUpdateShelf:e.updateShelf}))}}),o.a.createElement(d.a,{path:"/reading",render:function(){return o.a.createElement(R,{title:"Currently Reading",shelf:"currentlyReading",books:e.state.books,onUpdateShelf:e.updateShelf})}}),o.a.createElement(d.a,{path:"/toread",render:function(){return o.a.createElement(R,{title:"Want to Read",shelf:"wantToRead",books:e.state.books,onUpdateShelf:e.updateShelf})}}),o.a.createElement(d.a,{path:"/read",render:function(){return o.a.createElement(R,{title:"Read",shelf:"read",books:e.state.books,onUpdateShelf:e.updateShelf})}}),o.a.createElement(d.a,{path:"/search",render:function(){return o.a.createElement(w,{ownedBooks:e.state.books,onUpdateShelf:e.updateShelf})}}),o.a.createElement(S,null)))}}]),t}(o.a.PureComponent);a(35);l.a.render(o.a.createElement(c.a,{basename:"/MyReads-Udacity"},o.a.createElement(O,null)),document.getElementById("root"))}},[[19,2,1]]]);
//# sourceMappingURL=main.ad3009d1.chunk.js.map